!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = "undefined" != typeof globalThis ? globalThis : e || self).cssVars = t() }(this, function () { "use strict"; function e() { return (e = Object.assign ? Object.assign.bind() : function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t]; for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]) } return e }).apply(this, arguments) } function t(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = { mimeType: t.mimeType || null, onBeforeSend: t.onBeforeSend || Function.prototype, onSuccess: t.onSuccess || Function.prototype, onError: t.onError || Function.prototype, onComplete: t.onComplete || Function.prototype }, n = Array.isArray(e) ? e : [e], o = Array.apply(null, Array(n.length)).map(function (e) { return null }); function s(e) { var t = "string" == typeof e, r = t && "<" === e.trim().charAt(0); return t && !r } function a(e, t) { r.onError(e, n[t], t) } function i(e, t) { var s = r.onSuccess(e, n[t], t); e = !1 === s ? "" : s || e, o[t] = e, -1 === o.indexOf(null) && r.onComplete(o) } var c = document.createElement("a"); n.forEach(function (e, t) { if (c.setAttribute("href", e), c.href = String(c.href), document.all && !window.atob && c.host.split(":")[0] !== location.host.split(":")[0]) if (c.protocol === location.protocol) { var n = new XDomainRequest; n.open("GET", e), n.timeout = 0, n.onprogress = Function.prototype, n.ontimeout = Function.prototype, n.onload = function () { var e = n.responseText; s(e) ? i(e, t) : a(n, t) }, n.onerror = function (e) { a(n, t) }, setTimeout(function () { n.send() }, 0) } else a(null, t); else { var o = new XMLHttpRequest; o.open("GET", e), r.mimeType && o.overrideMimeType && o.overrideMimeType(r.mimeType), r.onBeforeSend(o, e, t), o.onreadystatechange = function () { if (4 === o.readyState) { var e = o.responseText; o.status < 400 && s(e) || 0 === o.status && s(e) ? i(e, t) : a(o, t) } }, o.send() } }) } function r(e) { var r = /\/\*[\s\S]+?\*\//g, o = /(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g, s = { rootElement: e.rootElement || document, include: e.include || 'style,link[rel="stylesheet"]', exclude: e.exclude || null, filter: e.filter || null, skipDisabled: !1 !== e.skipDisabled, useCSSOM: e.useCSSOM || !1, onBeforeSend: e.onBeforeSend || Function.prototype, onSuccess: e.onSuccess || Function.prototype, onError: e.onError || Function.prototype, onComplete: e.onComplete || Function.prototype }, a = Array.apply(null, s.rootElement.querySelectorAll(s.include)).filter(function (e) { var t; return t = s.exclude, !(e.matches || e.matchesSelector || e.webkitMatchesSelector || e.mozMatchesSelector || e.msMatchesSelector || e.oMatchesSelector).call(e, t) }), i = Array.apply(null, Array(a.length)).map(function (e) { return null }); function c() { if (-1 === i.indexOf(null)) { i.reduce(function (e, t, r) { return "" === t && e.push(r), e }, []).reverse().forEach(function (e) { return [a, i].forEach(function (t) { return t.splice(e, 1) }) }); var e = i.join(""); s.onComplete(e, i, a) } } function u(e, r, n, o) { var a = s.onSuccess(e, n, o); !function e(r, n, o, a) { var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : [], c = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : [], u = l(r, o, c); u.rules.length ? t(u.absoluteUrls, { onBeforeSend: function (e, t, r) { s.onBeforeSend(e, n, t) }, onSuccess: function (e, t, r) { var o = s.onSuccess(e, n, t), a = l(e = !1 === o ? "" : o || e, t, c); return a.rules.forEach(function (t, r) { e = e.replace(t, a.absoluteRules[r]) }), e }, onError: function (t, s, l) { i.push({ xhr: t, url: s }), c.push(u.rules[l]), e(r, n, o, a, i, c) }, onComplete: function (t) { t.forEach(function (e, t) { r = r.replace(u.rules[t], e) }), e(r, n, o, a, i, c) } }) : a(r, i) }(e = void 0 !== a && !1 == !!a ? "" : a || e, n, o, function (e, t) { null === i[r] && (t.forEach(function (e) { return s.onError(e.xhr, n, e.url) }), !s.filter || s.filter.test(e) ? i[r] = e : i[r] = "", c()) }) } function l(e, t) { var s = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [], a = {}; return a.rules = (e.replace(r, "").match(o) || []).filter(function (e) { return -1 === s.indexOf(e) }), a.urls = a.rules.map(function (e) { return e.replace(o, "$1") }), a.absoluteUrls = a.urls.map(function (e) { return n(e, t) }), a.absoluteRules = a.rules.map(function (e, r) { var o = a.urls[r], s = n(a.absoluteUrls[r], t); return e.replace(o, s) }), a } a.length ? a.forEach(function (e, r) { var o = e.getAttribute("href"), a = e.getAttribute("rel"), l = "link" === e.nodeName.toLowerCase() && o && a && -1 !== a.toLowerCase().indexOf("stylesheet"), f = !1 !== s.skipDisabled && e.disabled, d = "style" === e.nodeName.toLowerCase(); if (l && !f) if (-1 !== o.indexOf("data:text/css")) { var p = decodeURIComponent(o.substring(o.indexOf(",") + 1)); s.useCSSOM && (p = Array.apply(null, e.sheet.cssRules).map(function (e) { return e.cssText }).join("")), u(p, r, e, location.href) } else t(o, { mimeType: "text/css", onBeforeSend: function (t, r, n) { s.onBeforeSend(t, e, r) }, onSuccess: function (t, s, a) { u(t, r, e, n(o)) }, onError: function (t, n, o) { i[r] = "", s.onError(t, e, n), c() } }); else if (d && !f) { var m = e.textContent; s.useCSSOM && (m = Array.apply(null, e.sheet.cssRules).map(function (e) { return e.cssText }).join("")), u(m, r, e, location.href) } else i[r] = "", c() }) : s.onComplete("", []) } function n(e, t) { var r = document.implementation.createHTMLDocument(""), n = r.createElement("base"), o = r.createElement("a"); return r.head.appendChild(n), r.body.appendChild(o), n.href = t || document.baseURI || (document.querySelector("base") || {}).href || location.href, o.href = e, o.href } var o = s; function s(e, t, r) { e instanceof RegExp && (e = a(e, r)), t instanceof RegExp && (t = a(t, r)); var n = i(e, t, r); return n && { start: n[0], end: n[1], pre: r.slice(0, n[0]), body: r.slice(n[0] + e.length, n[1]), post: r.slice(n[1] + t.length) } } function a(e, t) { var r = t.match(e); return r ? r[0] : null } function i(e, t, r) { var n, o, s, a, i, c = r.indexOf(e), u = r.indexOf(t, c + 1), l = c; if (c >= 0 && u > 0) { if (e === t) return [c, u]; for (n = [], s = r.length; l >= 0 && !i;)l == c ? (n.push(l), c = r.indexOf(e, l + 1)) : 1 == n.length ? i = [n.pop(), u] : ((o = n.pop()) < s && (s = o, a = u), u = r.indexOf(t, l + 1)), l = c < u && c >= 0 ? c : u; n.length && (i = [s, a]) } return i } function c(t) { var r = e({}, { preserveStatic: !0, removeComments: !1 }, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}); function n(e) { throw Error("CSS parse error: ".concat(e)) } function s(e) { var r = e.exec(t); if (r) return t = t.slice(r[0].length), r } function a() { return s(/^{\s*/) } function i() { s(/^\s*/) } function c() { for (var e, o = []; e = function () { if (i(), "/" === t[0] && "*" === t[1]) { for (var e = 2; t[e] && ("*" !== t[e] || "/" !== t[e + 1]);)e++; if (!t[e]) return n("end of comment is missing"); var r = t.slice(2, e); return t = t.slice(e + 2), { type: "comment", comment: r } } }();)o.push(e); return r.removeComments ? [] : o } function u() { for (i(); "}" === t[0];)n("extra closing bracket"); var e = s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/); if (e) { var r, o = e[0].trim(); /\/\*/.test(o) && (o = o.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, "")); var a = /["']\w*,\w*["']/.test(o); return a && (o = o.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, function (e) { return e.replace(/,/g, "â€Œ") })), r = /,/.test(o) ? o.split(/\s*(?![^(]*\)),\s*/) : [o], a && (r = r.map(function (e) { return e.replace(/\u200C/g, ",") })), r } } function l() { if (!a()) return n("missing '{'"); for (var e, r = c(); e = function () { if ("@" === t[0]) return f(); s(/^([;\s]*)+/); var e = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g, r = s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/); if (r) { if (r = r[0].trim(), !s(/^:\s*/)) return n("property missing ':'"); var o = s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/), a = { type: "declaration", property: r.replace(e, ""), value: o ? o[0].replace(e, "").trim() : "" }; return s(/^[;\s]*/), a } }();)r.push(e), r = r.concat(c()); return s(/^}/) ? r : n("missing '}'") } function f() { if (i(), "@" === t[0]) { var e = function () { var e = s(/^@(import|charset|namespace)\s*([^;]+);/); if (e) return { type: e[1], name: e[2].trim() } }() || function () { if (s(/^@font-face\s*/)) return { type: "font-face", declarations: l() } }() || function () { var e = s(/^@media([^{]+)*/); if (e) return { type: "media", media: (e[1] || "").trim(), rules: d() } }() || function () { var e = s(/^@([-\w]+)?keyframes\s*/); if (e) { var t = e[1]; if (!(e = s(/^([-\w]+)\s*/))) return n("@keyframes missing name"); var r, o = e[1]; if (!a()) return n("@keyframes missing '{'"); for (var u = c(); r = function () { i(); for (var e, t = []; e = s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]), s(/^,\s*/); if (t.length) return { type: "keyframe", values: t, declarations: l() } }();)u.push(r), u = u.concat(c()); return s(/^}/) ? { type: "keyframes", name: o, vendor: t, keyframes: u } : n("@keyframes missing '}'") } }() || function () { var e = s(/^@supports *([^{]+)/); if (e) return { type: "supports", supports: e[1].trim(), rules: d() } }() || function () { var e = s(/^@([-\w]+)?document *([^{]+)/); if (e) return { type: "document", document: e[2].trim(), vendor: e[1] ? e[1].trim() : null, rules: d() } }() || function () { var e = s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/); if (e) return { type: "custom-media", name: e[1].trim(), media: e[2].trim() } }() || function () { if (s(/^@host\s*/)) return { type: "host", rules: d() } }() || function () { if (s(/^@page */)) return { type: "page", selectors: u() || [], declarations: l() } }() || function () { var e = s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/); if (e) return { type: "page-margin-box", name: "".concat(e[1], "-").concat(e[2]) + (e[3] ? "-".concat(e[3]) : ""), declarations: l() } }(); if (e && !r.preserveStatic) return (e.declarations ? e.declarations.some(function (e) { return /var\(/.test(e.value) }) : (e.keyframes || e.rules || []).some(function (e) { return (e.declarations || []).some(function (e) { return /var\(/.test(e.value) }) })) ? e : {}; return e } } function d(e) { if (!e && !a()) return n("missing '{'"); for (var i, d = c(); t.length && (e || "}" !== t[0]) && (i = f() || function () { if (!r.preserveStatic) { var e = o("{", "}", t); if (e) { var s = /:(?:root|host)(?![.:#(])/.test(e.pre) && /--\S*\s*:/.test(e.body), a = /var\(/.test(e.body); if (!s && !a) return t = t.slice(e.end + 1), {} } } var i = u() || [], c = r.preserveStatic ? l() : l().filter(function (e) { var t = i.some(function (e) { return /:(?:root|host)(?![.:#(])/.test(e) }) && /^--\S/.test(e.property), r = /var\(/.test(e.value); return t || r }); return i.length || n("selector missing"), { type: "rule", selectors: i, declarations: c } }());)i.type && d.push(i), d = d.concat(c()); return e || s(/^}/) ? d : n("missing '}'") } return { type: "stylesheet", stylesheet: { rules: d(!0), errors: [] } } } function u(t) { var r = e({}, { parseHost: !1, store: {}, onWarning: function () { } }, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}), n = new RegExp(":".concat(r.parseHost ? "host" : "root", "$")); return "string" == typeof t && (t = c(t, r)), t.stylesheet.rules.forEach(function (e) { "rule" === e.type && e.selectors.some(function (e) { return n.test(e) }) && e.declarations.forEach(function (e, t) { var n = e.property, o = e.value; n && 0 === n.indexOf("--") && (r.store[n] = o) }) }), r.store } function l(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", r = arguments.length > 2 ? arguments[2] : void 0, n = { charset: function (e) { return "@charset " + e.name + ";" }, comment: function (e) { return 0 === e.comment.indexOf("__CSSVARSPONYFILL") ? "/*" + e.comment + "*/" : "" }, "custom-media": function (e) { return "@custom-media " + e.name + " " + e.media + ";" }, declaration: function (e) { return e.property + ":" + e.value + ";" }, document: function (e) { return "@" + (e.vendor || "") + "document " + e.document + "{" + o(e.rules) + "}" }, "font-face": function (e) { return "@font-face{" + o(e.declarations) + "}" }, host: function (e) { return "@host{" + o(e.rules) + "}" }, import: function (e) { return "@import " + e.name + ";" }, keyframe: function (e) { return e.values.join(",") + "{" + o(e.declarations) + "}" }, keyframes: function (e) { return "@" + (e.vendor || "") + "keyframes " + e.name + "{" + o(e.keyframes) + "}" }, media: function (e) { return "@media " + e.media + "{" + o(e.rules) + "}" }, namespace: function (e) { return "@namespace " + e.name + ";" }, page: function (e) { return "@page " + (e.selectors.length ? e.selectors.join(", ") : "") + "{" + o(e.declarations) + "}" }, "page-margin-box": function (e) { return "@" + e.name + "{" + o(e.declarations) + "}" }, rule: function (e) { var t = e.declarations; if (t.length) return e.selectors.join(",") + "{" + o(t) + "}" }, supports: function (e) { return "@supports " + e.supports + "{" + o(e.rules) + "}" } }; function o(e) { for (var o = "", s = 0; s < e.length; s++) { var a = e[s]; r && r(a); var i = n[a.type](a); i && (o += i, i.length && a.selectors && (o += t)) } return o } return o(e.stylesheet.rules) } s.range = i; var f = "undefined" != typeof window, d = f && window.CSS && window.CSS.supports && window.CSS.supports("(--a: 0)"), p = { group: 0, job: 0 }, m = { rootElement: f ? document : null, shadowDOM: !1, include: "style,link[rel=stylesheet]", exclude: "", variables: {}, onlyLegacy: !0, preserveStatic: !0, preserveVars: !1, silent: !1, updateDOM: !0, updateURLs: !0, watch: null, onBeforeSend: function () { }, onError: function () { }, onWarning: function () { }, onSuccess: function () { }, onComplete: function () { }, onFinally: function () { } }, v = /\/\*[\s\S]+?\*\//g, h = /@(?:-\w*-)?keyframes/, y = /@media[^{]+\{([\s\S]+?})\s*}/g, g = /url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g, b = /(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g, S = /var\(\s*--[\w-]/, E = /(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/, w = { dom: {}, job: {}, user: {} }, x = !1, C = null, O = 0, A = null, k = !1; function _() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e({}, m, t); function s(e, t, r, o) { n.silent || window.console, n.onError(e, t, r, o) } function a(e) { n.silent || window.console, n.onWarning(e) } function i(e) { n.onFinally(!!e, d, L() - n.__benchmark) } if (f) { if (n.watch) return n.watch = m.watch, function (e) { function t(e) { var t = r(e) && e.hasAttribute("disabled"), n = (e.sheet || {}).disabled; return t || n } function r(e) { return "link" === e.nodeName.toLowerCase() && -1 !== (e.getAttribute("rel") || "").indexOf("stylesheet") } function n(e) { return "style" === e.nodeName.toLowerCase() } window.MutationObserver && (C && (C.disconnect(), C = null), (C = new MutationObserver(function (o) { o.some(function (o) { var s, a; return function (n) { var o = !1; if ("attributes" === n.type && r(n.target) && !t(n.target)) { var s = "disabled" === n.attributeName, a = "href" === n.attributeName, i = "skip" === n.target.getAttribute("data-cssvars"), c = "src" === n.target.getAttribute("data-cssvars"); s ? o = !i && !c : a && (i ? n.target.setAttribute("data-cssvars", "") : c && M(e.rootElement, !0), o = !0) } return o }(o) || function (e) { var t = !1; if ("childList" === e.type) { var r = n(e.target), o = "out" === e.target.getAttribute("data-cssvars"); t = r && !o } return t }(o) || (s = !1, "childList" === o.type && (s = [].slice.call(o.addedNodes).some(function (e) { var o = 1 === e.nodeType && e.hasAttribute("data-cssvars"), s = n(e) && E.test(e.textContent); return !o && (r(e) || s) && !t(e) })), s) || (a = !1, "childList" === o.type && (a = [].slice.call(o.removedNodes).some(function (t) { var r = 1 === t.nodeType, n = r && "out" === t.getAttribute("data-cssvars"), o = r && "src" === t.getAttribute("data-cssvars"); if (o || n) { var s = t.getAttribute("data-cssvars-group"), a = e.rootElement.querySelector('[data-cssvars-group="'.concat(s, '"]')); o && M(e.rootElement, !0), a && a.parentNode.removeChild(a) } return o })), a) }) && _(e) })).observe(document.documentElement, { attributes: !0, attributeFilter: ["disabled", "href"], childList: !0, subtree: !0 })) }(n), void _(n); if (!1 === n.watch && C && (C.disconnect(), C = null), !n.__benchmark) { if (x === n.rootElement) return void function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 100; clearTimeout(A), A = setTimeout(function () { e.__benchmark = null, _(e) }, t) }(t); var T = [].slice.call(n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])')); n.__benchmark = L(), n.exclude = [C ? '[data-cssvars]:not([data-cssvars=""])' : '[data-cssvars="out"]', "link[disabled]:not([data-cssvars])", n.exclude].filter(function (e) { return e }).join(","), n.variables = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = /^-{2}/; return Object.keys(e).reduce(function (r, n) { return r[t.test(n) ? n : "--".concat(n.replace(/^-+/, ""))] = e[n], r }, {}) }(n.variables), T.forEach(function (e) { var t = "style" === e.nodeName.toLowerCase() && e.__cssVars.text, r = t && e.textContent !== e.__cssVars.text; t && r && (e.sheet && (e.sheet.disabled = !1), e.setAttribute("data-cssvars", "")) }), !C && ([].slice.call(n.rootElement.querySelectorAll('[data-cssvars="out"]')).forEach(function (e) { var t = e.getAttribute("data-cssvars-group"); (t ? n.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(t, '"]')) : null) || e.parentNode.removeChild(e) }), O && T.length < O && (O = T.length, w.dom = {})) } if ("loading" !== document.readyState) if (d && n.onlyLegacy) { var R = !1; if (n.updateDOM) { var N = n.rootElement.host || (n.rootElement === document ? document.documentElement : n.rootElement); Object.keys(n.variables).forEach(function (e) { var t = n.variables[e]; R = R || t !== getComputedStyle(N).getPropertyValue(e), N.style.setProperty(e, t) }) } i(R) } else !k && (n.shadowDOM || n.rootElement.shadowRoot || n.rootElement.host) ? r({ rootElement: m.rootElement, include: m.include, exclude: n.exclude, skipDisabled: !1, onSuccess: function (e, t, r) { return !((t.sheet || {}).disabled && !t.__cssVars) && ((e = ((e = e.replace(v, "").replace(y, "")).match(b) || []).join("")) || !1) }, onComplete: function (e, t, r) { u(e, { store: w.dom, onWarning: a }), k = !0, _(n) } }) : (x = n.rootElement, r({ rootElement: n.rootElement, include: n.include, exclude: n.exclude, skipDisabled: !1, onBeforeSend: n.onBeforeSend, onError: function (e, t, r) { var n = e.responseURL || j(r, location.href), o = e.statusText ? "(".concat(e.statusText, ")") : "Unspecified Error" + (0 === e.status ? " (possibly CORS related)" : ""); s("CSS XHR Error: ".concat(n, " ").concat(e.status, " ").concat(o), t, e, n) }, onSuccess: function (e, t, r) { if ((t.sheet || {}).disabled && !t.__cssVars) return !1; var o, s = "link" === t.nodeName.toLowerCase(), a = "style" === t.nodeName.toLowerCase() && e !== t.textContent, i = n.onSuccess(e, t, r); return e = void 0 !== i && !1 == !!i ? "" : i || e, n.updateURLs && (s || a) && (((o = e).replace(v, "").match(g) || []).forEach(function (e) { var t = e.replace(g, "$1"), n = j(t, r); o = o.replace(e, e.replace(t, n)) }), e = o), e }, onComplete: function (t, r) { var f = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [], d = e({}, w.dom, w.user); if (w.job = {}, f.forEach(function (e, t) { var o = r[t]; if (e.__cssVars = e.__cssVars || {}, e.__cssVars.text = o, E.test(o)) try { var i = c(o, { preserveStatic: n.preserveStatic, removeComments: !0 }); u(i, { parseHost: !!n.rootElement.host, store: w.dom, onWarning: a }), e.__cssVars.tree = i } catch (t) { s(t.message, e) } }), e(w.job, w.dom), n.updateDOM ? (e(w.user, n.variables), e(w.job, w.user)) : (e(w.job, w.user, n.variables), e(d, n.variables)), p.job > 0 && (Object.keys(w.job).length > Object.keys(d).length || Object.keys(d).length && Object.keys(w.job).some(function (e) { return w.job[e] !== d[e] }))) M(n.rootElement), _(n); else { var m = [], v = [], y = !1; if (n.updateDOM && p.job++, f.forEach(function (t, i) { var u = !t.__cssVars.tree; if (t.__cssVars.tree) try { !function (t) { var r = e({}, { preserveStatic: !0, preserveVars: !1, variables: {}, onWarning: function () { } }, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}); "string" == typeof t && (t = c(t, r)), function e(t, r) { t.rules.forEach(function (n) { n.rules ? e(n, r) : n.keyframes ? n.keyframes.forEach(function (e) { "keyframe" === e.type && r(e.declarations, n) }) : n.declarations && r(n.declarations, t) }) }(t.stylesheet, function (e, t) { for (var n = 0; n < e.length; n++) { var s = e[n], a = s.type, i = s.property, c = s.value; if ("declaration" === a) if (r.preserveVars || !i || 0 !== i.indexOf("--")) { if (-1 !== c.indexOf("var(")) { var u = function e(t) { var r, n, s, a, i, c, u = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, l = arguments.length > 2 ? arguments[2] : void 0; if (-1 === t.indexOf("var(")) return t; var f = o("(", ")", t); return f ? "var" === f.pre.slice(-3) ? 0 === f.body.trim().length ? (u.onWarning("var() must contain a non-whitespace string"), t) : f.pre.slice(0, -3) + (n = (r = f.body).split(",")[0].replace(/[\s\n\t]/g, ""), s = (r.match(/(?:\s*,\s*){1}(.*)?/) || [])[1], i = (a = Object.prototype.hasOwnProperty.call(u.variables, n) ? String(u.variables[n]) : void 0) || (s ? String(s) : void 0), c = l || r, a || u.onWarning('variable "'.concat(n, '" is undefined')), i && "undefined" !== i && i.length > 0 ? e(i, u, c) : "var(".concat(c, ")")) + e(f.post, u) : f.pre + "(".concat(e(f.body, u), ")") + e(f.post, u) : (-1 !== t.indexOf("var(") && u.onWarning('missing closing ")" in the value "'.concat(t, '"')), t) }(c, r); u !== s.value && (u = function (e) { return (e.match(/calc\(([^)]+)\)/g) || []).forEach(function (t) { var r = "calc".concat(t.split("calc").join("")); e = e.replace(t, r) }), e }(u), r.preserveVars ? (e.splice(n, 0, { type: a, property: i, value: u }), n++) : s.value = u) } } else e.splice(n, 1), n-- } }), l(t) }(t.__cssVars.tree, e({}, n, { variables: w.job, onWarning: a })); var f = l(t.__cssVars.tree); if (n.updateDOM) { var d = r[i], g = S.test(d); if (t.getAttribute("data-cssvars") || t.setAttribute("data-cssvars", "src"), f.length && g) { var b = t.getAttribute("data-cssvars-group") || ++p.group, E = f.replace(/\s/g, ""), x = n.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(b, '"]')) || document.createElement("style"); y = y || h.test(f), n.preserveStatic && t.sheet && (t.sheet.disabled = !0), x.hasAttribute("data-cssvars") || x.setAttribute("data-cssvars", "out"), E === t.textContent.replace(/\s/g, "") ? (u = !0, x && x.parentNode && (t.removeAttribute("data-cssvars-group"), x.parentNode.removeChild(x))) : E !== x.textContent.replace(/\s/g, "") && ([t, x].forEach(function (e) { e.setAttribute("data-cssvars-job", p.job), e.setAttribute("data-cssvars-group", b) }), x.textContent = f, m.push(f), v.push(x), x.parentNode || t.parentNode.insertBefore(x, t.nextSibling)) } } else t.textContent.replace(/\s/g, "") !== f && m.push(f) } catch (e) { s(e.message, t) } u && t.setAttribute("data-cssvars", "skip"), t.hasAttribute("data-cssvars-job") || t.setAttribute("data-cssvars-job", p.job) }), O = n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length, n.shadowDOM) for (var g, b = [].concat(n.rootElement).concat([].slice.call(n.rootElement.querySelectorAll("*"))), C = 0; g = b[C]; ++C)g.shadowRoot && g.shadowRoot.querySelector("style") && _(e({}, n, { rootElement: g.shadowRoot })); n.updateDOM && y && function (e) { var t = ["animation-name", "-moz-animation-name", "-webkit-animation-name"].filter(function (e) { return getComputedStyle(document.body)[e] })[0]; if (t) { for (var r = [].slice.call(e.querySelectorAll("*")), n = [], o = "__CSSVARSPONYFILL-KEYFRAMES__", s = 0, a = r.length; s < a; s++) { var i = r[s]; "none" !== getComputedStyle(i)[t] && (i.style[t] += o, n.push(i)) } document.body.offsetHeight; for (var c = 0, u = n.length; c < u; c++) { var l = n[c].style; l[t] = l[t].replace(o, "") } } }(n.rootElement), x = !1, n.onComplete(m.join(""), v, JSON.parse(JSON.stringify(w.job)), L() - n.__benchmark), i(v.length) } } })); else document.addEventListener("DOMContentLoaded", function e(r) { _(t), document.removeEventListener("DOMContentLoaded", e) }) } } function j(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : location.href, r = document.implementation.createHTMLDocument(""), n = r.createElement("base"), o = r.createElement("a"); return r.head.appendChild(n), r.body.appendChild(o), n.href = t, o.href = e, o.href } function L() { return f && (window.performance || {}).now ? window.performance.now() : (new Date).getTime() } function M(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]')).forEach(function (e) { return e.setAttribute("data-cssvars", "") }), t && (w.dom = {}) } return _.reset = function () { for (var e in p.job = 0, p.group = 0, x = !1, C && (C.disconnect(), C = null), O = 0, A = null, k = !1, w) w[e] = {} }, _ });